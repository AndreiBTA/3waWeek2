{% extends 'base.html.twig' %}
{% block body %}
    <h2>Comments</h2>

     {{ form_start(form, {
        'attr' : {
            'class': 'comments',
            'action': path('app_product_details', {'id': product.id}),
            'method': 'POST'
        }
     }) }}
    {{ form_row(form.name) }}
    {{ form_row(form.content) }}
    {{ form_row(form._token) }}
    <button class="btn btn-success" type="submit">Add comment</button>
    {{ form_end(form) }}

    <div id="comment-parent" class="shadow rounded my-3 p-2 list-group">
        {% for comment in product.comments %}
            <h3>Pseudo: {{ comment.name }}</h3>
            <p>Message: {{ comment.content }}</p>
            <p>Posted at: {{ comment.createdAt|date("d-m-y H:i") }}</p>
        {% endfor %}

    </div>
    <script src="{{ asset('js/comments.js') }}" type="application/javascript"></script>
{% endblock %}

